<!DOCTYPE html>
<html lang="en">
<head th:replace="~{head :: headModulesFragment}"></head>

<head>
    <script src="/controllerjs/employee.js"></script>
</head>

<body style="background-color: #E0E9DD">
<div th:replace="~{navbar :: navbarFragment}"></div>

<div class="container-fluid">


    <!--  title area start-->
    <div class="row p-2">
        <div class="col--md-12">
            <h1 class="h1 text-center"
                style="background-color: #044800; color: whitesmoke; padding: 25px; border-radius: 30px">
                employee management
            </h1>
        </div>
    </div>
    <!--  title area end-->

    <!--  title button area start-->
    <div class="row mt-2">
        <div class="col-md-8">
            <div id="divPrintEmployeeTableButton" class="">
                <button type="button" class="btn fw-bold"
                        style="background-color: #044800; color: whitesmoke; width: 25%; border: 1px solid black; border-radius: 30px"
                        onclick="printEmployeeFullTable()">
                    <i class="fa-solid fa-print fa-beat"> </i> print employee table
                </button>
            </div>

        </div>
        <div class="col-md-4">
            <button type="button" class="btn fw-bold"
                    style="background-color: #044800; color: whitesmoke; width: 100%; border: 1px solid black; border-radius: 30px"
                    data-bs-toggle="modal" data-bs-target="#modalEmployeeAdd" data-bs-backdrop="static"
                    data-bs-keyboard="false">
                <i class="fa-solid fa-plus fa-beat"></i> add new employee
            </button>
        </div>
    </div>
    <!--  title button area end-->

    <!--      edit delete print button start-->
    <div class="row mt-2">
        <div id="divModifyButton" class="d-none">
            <div class="col-md-6">
                <button type="button" class="btn btn-warning fw-bold"
                        style="width: 15%; color: whitesmoke; border:1px solid black"
                        onclick="employeeFormRefill(window['editOb'],window['editRow'])">
                    <i class="fa-solid fa-recycle fa-beat"> </i> edit
                </button>
                <button type="button" id="divModifyButtonDelete" class="btn btn-danger fw-bold ms-2 me-2"
                        style="width: 15%; border: 1px solid black; pointer-events: all"
                        onclick="deleteEmployee(window['editOb'],window['editRow'])">
                    <i class="fa-solid fa-trash fa-beat"></i> delete
                </button>
                <button type="button" class="btn btn-primary fw-bold"
                        style="width: 15%; border:1px solid black"
                        onclick="printEmployee(window['editOb'],window['editRow'])">
                    <i class="fa-solid fa-eye fa-beat"></i> print
                </button>
            </div>
        </div>
    </div>
    <!--      edit delete print button end-->

    <!--  table area start-->
    <div class="row mt-5"></div>
    <table class="table table-bordered table-striped" id="tableEmployee">
        <thead class="table text-center" style="background-color: #044800; color: whitesmoke">
        <th>#</th>
        <th>full name</th>
        <th>calling name</th>
        <th>dob</th>
        <th>nic</th>
        <th>gender</th>
        <th>mobile</th>
        <th>landno</th>
        <th>email</th>
        <th>address</th>
        <th>added date</th>
        <th>photo</th>
        <th>has user account</th>
        <th>status</th>
        <th>designation</th>
        <th>civil status</th>
        <th>modify</th>
        </thead>
        <tbody>
        </tbody>
    </table>
    <!--  table area end-->


    <!--employee modal area start-->
    <div class="modal" id="modalEmployeeAdd" data-bs-backdrop="static" data-bs-keyboard="false">
        <div class="modal-dialog modal-xl">
            <div class="modal-content">
                <div class="modal-header" style="background-color: #044800; color: whitesmoke;">
                    <h2 class="h2">
                         employee form
                    </h2>
                    <button type="button" class="btn btn btn-danger"
                            style="color: whitesmoke; border: 1px solid black; border-radius: 25%;"
                            data-bs-dismiss="modal">
                        <i class="fa-solid fa-xmark"> </i> close
                    </button>
                </div>
                <div class="modal-body" style="background-color: #E0E9DD">

                    <form onsubmit="return false" id="employeeForm">
                        <!--                    required mark start-->
                        <div class="row mt-2">
                            <div class="col-md-12 text-start">
                                <span class="text-danger">required *</span>
                            </div>
                        </div>
                        <!--                    required mark end-->

                        <!--                        full name start-->
                        <div class="row mt-2">
                            <div class="col-md-6">
                                <label for="textFullName" class="form-label fw-bold">full name <i
                                        class="text-danger">*</i></label>
                            </div>
                            <div class="col-md-6">
                                <input type="text" id="textFullName" class="form-control text-center" required
                                       placeholder="enter your full name"
                                       onkeyup="textFullNameValidator(this,'^(([A-Z][a-z]{3,20}[\\s])+([A-Z][a-z]{3,20}){1})$',)">
                                <!--                                <input type="text" id="textFullName" class="form-control text-center" required placeholder="enter your full name" onkeyup="textFullNameValidator(this,'^ (   (([A-Z][a-z]{3,20}[\\s])+([A-Z][a-z]{3,20}){1})   )  |  (     (([A-Z][a-z]{3,20}[\\s])+([A-Z][a-z]{3,20}[\\s])+([A-Z][a-z]{3,20}){1})      )  | (         (([A-Z][a-z]{3,20}[\\s])+([A-Z][a-z]{3,20}[\\s])+  ([A-Z][a-z]{3,20}[\\s])+   ([A-Z][a-z]{3,20}){1})        ) $')">-->
                                <!--                                <input type="text" id="textFullName" class="form-control text-center" required placeholder="enter your full name" onkeyup="textFullNameValidator(this,'^ ((([A-Z][a-z]{3,20}[\\s])+([A-Z][a-z]{3,20}){1}))|((([A-Z][a-z]{3,20}[\\s])+([A-Z][a-z]{3,20}[\\s])+([A-Z][a-z]{3,20}){1}))|((([A-Z][a-z]{3,20}[\\s])+([A-Z][a-z]{3,20}[\\s])+([A-Z][a-z]{3,20}[\\s])+([A-Z][a-z]{3,20}){1}))$')">-->
                            </div>
                        </div>
                        <!--                        full name end-->


                        <!--                        calling name start-->
                        <div class="row mt-2">
                            <div class="col-md-6">
                                <label for="textCallingName" class="form-label fw-bold">calling name <i
                                        class="text-danger">*</i></label>
                            </div>
                            <div class="col-md-6">
                                <input type="text" id="textCallingName" class="form-control text-center" required
                                       placeholder="enter calling name"
                                       onkeyup="textCallingNameValidator(this,'^[A-Z][a-z]{3,20}$')" list="dlNameParts">
                                <datalist id="dlNameParts">

                                </datalist>
                            </div>
                        </div>
                        <!--                        calling name end-->


                        <!--                    dob start-->
                        <div class="row mt-2">
                            <div class="col-md-6">
                                <label for="selectDOB" class="form-label fw-bold">
                                    dob<i class="text-danger" *></i></label>
                            </div>
                            <div class="col-md-6">
                                <!--                            <input type="text" id="textAge" class="form-control text-center" required placeholder="enter age" onkeyup="textValidator(this,'^(([1][8-9])|([2345][1234567890]))$',employee,age)" >-->
                                <input type="date" id="selectDOB" class="form-control text-center" required
                                       onchange="textValidator(this,'^[0-9]{4}[-][0-9]{2}[-][0-9]{2}$','employee','dob')">
                                <!--                            [1][89]-->
                                <!--                            [2345][1234567890]-->
                            </div>
                        </div>
                        <!--                    dob end-->

                        <!--                    nic start-->
                        <div class="row mt-2">
                            <div class="col-md-6">
                                <label for="textNic" class="form-label fw-bold">
                                    nic <i class="text-danger">*</i>
                                </label>
                            </div>
                            <div class="col-md-6">
                                <input type="text" id="textNic" class="form-control text-center" required
                                       placeholder="enter nic number"
                                       onkeyup="textValidator(this,'^(([0-9]{9}[VvXxSs])|([0-9]{12}))$','employee','nic'); generateGenderAndDOB(this)">
                                <!--                                                                                              (([0-9]{9}[VvXxSs])|([0-9]{12}))$-->
                            </div>
                        </div>
                        <!--                    nic end-->


                        <!--                        gender start-->
                        <div class="row mt-2">
                            <div class="col-md-6">
                                <label for="selectGender" class="form-label fw-bold">gender <i class="text-danger">*</i></label>
                            </div>
                            <div class="col-md-6">
                                <select id="selectGender" class="form-select text-center" required
                                        onchange="selectDBValidator(this,'','employee','gender_id')">
                                    <option value="" selected disabled>select an option</option>
                                    <option value="male">male</option>
                                    <option value="female">female</option>
                                </select>
                            </div>
                        </div>
                        <!--                        gender end-->


                        <!--                    mobile start-->
                        <div class="row mt-2">
                            <div class="col-md-6">
                                <label for="textMobile" class="form-label fw-bold">
                                    mobile <i class="text-danger">*</i>
                                </label>
                            </div>
                            <div class="col-md-6">
                                <input type="text" id="textMobile" class="form-control text-center" required
                                       placeholder="enter mobile number"
                                       onkeyup="textValidator(this,'^[0][7][01245678][0-9]{7}$','employee','mobile')">
                            </div>
                        </div>
                        <!--                    mobile end-->


                        <!--                        land start-->
                        <div class="row mt-2">
                            <div class="col-md-6">
                                <label for="textLand" class="form-label fw-bold">land no <i class="text-primary">(optional)</i></label>
                            </div>
                            <div class="col-md-6">
                                <input type="text" id="textLand" class="form-control text-center"
                                       placeholder="enter land number"
                                       onkeyup="textValidator(this,'^[0][12345689][0-9]{8}$','employee','landno')">
                            </div>
                        </div>
                        <!--                        land end-->


                        <!--                    email start-->
                        <div class="row mt-2">
                            <div class="col-md-6">
                                <label for="textEmail" class="form-label fw-bold">
                                    email <i class="text-primary">(optional)</i>
                                </label>
                            </div>
                            <div class="col-md-6">
                                <input type="text" id="textEmail" class="form-control text-center"
                                       placeholder="enter email"
                                       onkeyup="textValidator(this,'^[A-Za-z0-9]{6,20}[@][a-z]{3,10}[.][a-z]{2,3}$','employee','email')">
                            </div>
                        </div>
                        <!--                    email end-->


                        <!--                    address start-->
                        <div class="row mt-2">
                            <div class="col-md-6">
                                <label for="textAddress" class="form-label fw-bold">
                                    address <i class="text-danger">*</i>
                                </label>
                            </div>
                            <div class="col-md-6">
                                <input type="text" id="textAddress" class="form-control text-center" required
                                       placeholder="EX no 11,[space],kiribathgoda,[space]kalaniya "
                                       onkeyup="textValidator(this,'^[nN][oO][\\s][0-9]{1,3}[\\s][a-z]{3,50}$','employee','address')">
                            </div>
                        </div>
                        <!--                    address end-->


                        <div class="row mt-2">
                            <div class="col-md-6">
                                <label for="fileEmpPhoto" class="form-label fw-bold">image <i class="text-danger">*</i>
                                </label>
                                <button type="button" id="btnSelectImage" onclick="fileEmpPhoto.click()"
                                        class="btn btn-primary">select image
                                </button>
                                <button type="button" id="btnClearImage" onclick="btnClearImageFN()"
                                        class="btn btn-info">clear image
                                </button>
                            </div>
                            <div class="col-md-6">
                                <img src="/icons/no-photo.png" style="height: 75px; width: 75px" alt="default image"
                                     id="imgEmpPhoto">
                                <input type="text" disabled class="form-control" id="textEmpPhoto">
                                <input type="file" class="form-control d-none" id="fileEmpPhoto"
                                       onchange="validateFileField(this,'employee','emp_photo','emp_photo_name','oldEmployee',imgEmpPhoto,textEmpPhoto)">
                            </div>
                        </div>


                        <!--                        status start-->
                        <div class="row mt-2">
                            <div class="col-md-6">
                                <label for="selectStatus" class="form-label fw-bold">employee status
                                    <i class="text-danger">*</i> </label>
                            </div>
                            <div class="col-md-6">
                                <select id="selectStatus" class="form-select text-center" required
                                        onchange="selectDBValidator(this,'','employee','employeestatus_id')">
                                    <option value="" selected disabled>select an option</option>
                                    <option value="working">working</option>
                                    <option value="resign">resign</option>
                                    <option value="delete">delete</option>
                                </select>
                            </div>
                        </div>
                        <!--                        status end-->


                        <!--                        designation start-->
                        <div class="row mt-2">
                            <div class="col-md-6">
                                <label for="selectDesignation" class="form-label fw-bold">designation <i
                                        class="text-danger">*</i></label>
                            </div>
                            <div class="col-md-6">
                                <div class="input-group">

                                    <select id="selectDesignation" class="form-select text-center" required
                                            onchange="selectDBValidator(this,'','employee','designation_id')">
                                        <option value="" selected disabled>select an option</option>
                                        <option value="manager">manger</option>
                                        <option value="reception">reception</option>
                                        <option value="admin">admin</option>
                                        <option value="labour">labour</option>
                                    </select>

                                    <span>
                                    <a class="btn btn-success" data-bs-toggle="collapse" href="#collapseExample"
                                       role="button">
                                              new
                                            </a>
                                </span>

                                </div>

                                <!--  collapse designation form    -->
                                <div class="collapse mt-2" id="collapseExample">
                                    <div class="card card-body">
                                        <form onsubmit="return false" id="designationForm">
                                            <div class="row">
                                                <label for="textDesignationName" class="col-4 fw-bold">name</label>
                                                <div class="col-8">
                                                    <input type="text" class="form-control"
                                                           placeholder="enter designation name "
                                                           id="textDesignationName"
                                                           onkeyup="textValidator(this,'','designationob','name')">
                                                </div>
                                            </div>
                                            <div class="row">
                                                <div class="col-12">
                                                    <button class="btn btn-success" onclick="buttonDesignationSubmit()">
                                                        add
                                                    </button>
                                                </div>
                                            </div>
                                        </form>
                                    </div>
                                </div>
                                <!--  collapse designation form end-->


                            </div>
                        </div>
                        <!--                        designation end-->


                        <!--                        civil status start-->
                        <div class="row mt-2">
                            <div class="col-md-6">
                                <label for="selectCivilStatus" class="form-label fw-bold">civil status <i
                                        class="text-danger">*</i></label>
                            </div>
                            <div class="col-md-6">
                                <select id="selectCivilStatus" class="form-select text-center" required
                                        onchange="selectValidator(this,'','employee','civilstatus')">
                                    <option value="" selected disabled>select an option</option>
                                    <option value="single">single</option>
                                    <option value="married">married</option>
                                </select>
                            </div>
                        </div>
                        <!--                        civil status end-->


                        <!--                    button start-->
                        <div class="row mt-5">
                            <div class="col-md-4">
                                <button type="reset" class="btn btn-danger fw-bold"
                                        style=" width: 50%; color: whitesmoke; border: 1px solid black; border-radius: 10%">
                                    <i class="fa-solid fa-trash fa-beat"> </i> reset
                                </button>
                            </div>
                            <div class="col-md-4 text-center">
                                <button type="button" class="btn btn-warning fw-bold" id="btnEmployeeUpdate"
                                        style="width: 50%; color: whitesmoke; border: 1px solid black; border-radius: 10%; pointer-events: all"
                                        onclick="buttonFormUpdate()">
                                    <i class="fa-solid fa-recycle fa-beat"> </i> update
                                </button>
                            </div>
                            <div class="col-md-4 text-end">
                                <button type="submit" id="btnEmployeeAdd" class="btn btn-primary fw-bold"
                                        style="width: 50%; color: whitesmoke; border: 1px solid black; border-radius: 10%; pointer-events: all"
                                        onclick="employeeSubmit()">
                                    <i class="fa-solid fa-plus fa-beat"> </i> add
                                </button>
                            </div>
                        </div>
                        <!--                    button end-->

                    </form>

                </div>
            </div>
        </div>
    </div>
    <!--employee modal area end-->

    <!--print model area start-->
    <div class="modal" id="printEmployeeModel">
        <div class="modal-dialog modal-fullscreen" id="printModalDialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">Modal print</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <table class="table table-striped table-bordered" id="printEmployeeTable">
                        <thead>
                        <th>#</th>
                        <th>full name</th>
                        <th>calling name</th>
                        <th>dob</th>
                        <th>nic</th>
                        <th>gender</th>
                        <th>mobile</th>
                        <th>landno</th>
                        <th>email</th>
                        <th>address</th>
                        <th>added date</th>
                        <!--                        <th>has user account</th>-->
                        <th>status</th>
                        <th>designation</th>
                        <th>civil status</th>
                        </thead>
                        <tbody>

                        </tbody>
                    </table>
                </div>
                <div class="modal-footer">
                    <button type="button" onclick="modalPrintButton()" class="btn btn-primary">print</button>
                </div>
            </div>
        </div>
    </div>
    <!--print model area end-->


</div>
</body>
</html>
